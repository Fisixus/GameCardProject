<script>
	function GetAndRefresh(theUrl) {
		var xmlHttp = new XMLHttpRequest();
		xmlHttp.open( "GET", theUrl, false );
		xmlHttp.send( null );
		location.reload(true);
	}
</script>	
<div class="lister">
	<table class="table table-sm table-hover table-stripped">
		<thead>
			<tr>
				<th scope="col">
					<a class="btn btn-outline-dark" href={{ url_for('listboardgames', sortby='name')}}>Name</a>
				</th>
				<th scope="col">
					<a class="btn btn-outline-dark" href={{ url_for('listboardgames', sortby='price')}}>Price</a>
				</th>
				<th scope="col">
					<a class="btn btn-outline-dark" href={{ url_for('listboardgames', sortby='sourceofsupply')}}>Source Of Supply</a>
				</th>
				<th scope="col">
					<a class="btn btn-outline-dark" href={{ url_for('listboardgames', sortby='numberofproduct')}}>Quantity</a>
				</th>
				<th scope="col">
					<a class="btn btn-outline-dark" href={{ url_for('listboardgames', sortby='personnum')}}>Person Num</a>
				</th>
				<th scope="col">
					<a class="btn btn-outline-dark" href={{ url_for('listboardgames', sortby='agerestrict')}}>Age Restrict</a>
				</th>
			</tr>
		</thead>
		<tbody>
			{% for row in rows %}
			<tr>
				<td><a href={{ url_for('productdetails', product_name=row["name"]) }} style="color:black">{{ row["name"] }}</a></td>
				<td>{{ row["price"] }}</td>
				<td>{{ row["sourceofsupply"] }}</td>
				<td>{{ row["numberofproduct"] }}</td>
				<td>{{ row["personnum"] }}</td>
				<td>{{ row["agerestrict"] }}</td>
				<td><a class="btn btn-outline-primary" onclick="GetAndRefresh('{{ url_for('add_item', product_id=row['id']) }}')">Add</a></td>
				{% for role in cus_role %}
					{% if role[0][0] == "A"  %}
					<td>
						<button class="btn btn-large btn-primary" data-toggle="confirmation"
						data-btn-ok-label="Continue" data-btn-ok-class="btn-success" onclick="GetRefresh('{{ url_for('deleteproduct', product_id=row['id'])}}')"
						data-btn-ok-icon-class="material-icons" data-btn-ok-icon-content="check"
						data-btn-cancel-label="Stop!" data-btn-cancel-class="btn-danger"
						data-btn-cancel-icon-class="material-icons" data-btn-cancel-icon-content="close"
						data-title="Is it ok?" data-content="Delete process can be dangerous. Are you sure?">
						X
						</button> 
					</td>
					{% endif %}	
				{% endfor %}
			</tr>
			{% endfor %}
		</tbody>
  </table>
</div>
